<html lang="en" nighteye="disabled" class=" ktctdk idc0_350 ddswmzvi gvstdxa"><head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link th:href="@{/css/hive/creation-hive.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/css/common-style.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/Boostrap/css/bootstrap.css}" rel="stylesheet" type="text/css">
    <script th:src="@{js/jquery.js}" type="text/javascript"></script>
</head>
<body>


<div>
    <nav class="navbar navbar-expand-lg" style="background-color: #FFF0B3; color: black;">
        <div class="container-fluid">
            <a class="navbar-brand" href="#"> BeehAIve </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">
                            Log-in
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            About Us
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            Contact Us
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            Info
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>


<section class="gradient-custom" style="height: 94vh">
    <div class="row justify-content-start h-100">

        <div class="row justify-content-center h-75 w-50 mt-2">

            <div class="col-12 col-lg-9 col-xl-8">
                <div class="card-body">
                    <div class="card-body p-4 hive_card">
                        <h1 class="label text-center" style="font-size: 3rem;"> Test con CNN </h1>
                    </div>
                </div>
            </div>

            <div class="col-12 col-lg-9 col-xl-8 mt-4">
                <div class="card-body">
                    <div class="card-body p-4 p-md-5 hive_card">


                        <form>
                            <div class="row">
                                <div class="col-md-12 mb-4">
                                    <div class="form-outline">
                                        <h5 class="form-label" for="HiveTempCNN">Temperatura percepita Arnia:</h5>
                                        <input type="number" step=".01" id="HiveTempCNN" class="form-control form-control-lg" style="border-radius: 10px;border: 1px solid black;background-color: #FFF0B3;">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12 mb-1">
                                    <h5 class="form-label" for="AmbTempCNN">Temperatura percepita Ambiente</h5>
                                    <input type="number" step=".01" id="AmbTempCNN" class="form-control form-control-lg" style="border-radius: 10px;border: 1px solid black;background-color: #FFF0B3;">
                                </div>
                            </div>
                            <div style="height: 30px"></div>
                            <div class="row">
                                <div class="col-md-12 d-flex justify-content-center" style="gap:10px;">
                                    <input class="btn btn-lg" type="button" value="Invia" id="CNN" style="border: 1px solid black;background-color: #FFF0B3;">
                                </div>
                            </div>
                        </form>


                    </div>
                </div>

                <div>
                    <div style="height: 5%"></div>
                    <div style="height: 18%">
                        <div style="width: 50%; float:left">
                            <h5 class="form-label" style="text-align:center" width="50%">Presenza Regina (CNN)</h5>
                        </div>
                        <div style="width: 50%; float: right">
                            <h5 class="form-label" style="text-align:center" width="50%">Presenza Regina (Reale)</h5>
                        </div>
                        <input disabled type="text" id="OutputPredictedQueenCNN" class="form-control form-control-lg" style=" float: left; border-radius: 10px;border: 1px solid black;background-color: #FFF0B3; width: 25%; margin-left: 12%; ">
                        <input disabled type="text" id="OutputPresenceQueenCNN" class="form-control form-control-lg" style="float: right; border-radius: 10px;border: 1px solid black;background-color: #FFF0B3; width: 25%; margin-right: 12%">
                    </div>
                    <div style="height: 18%">
                        <div style="width: 50%; float:left">
                            <h5 class="form-label" style="text-align:center" width="50%">Previsione CCD</h5>
                        </div>
                        <div style="width: 50%; float: right">
                            <h5 class="form-label" style="text-align:center" width="50%">Euristica di Aristeo</h5>
                        </div>
                        <input disabled type="text" id="OutputPredictedCCDCNN" class="form-control form-control-lg" style=" float: left; border-radius: 10px;border: 1px solid black;background-color: #FFF0B3; width: 25%; margin-left: 12%;">
                        <input disabled type="text" id="OutputHeuristicCCDCNN" class="form-control form-control-lg" style="float: right;  border-radius: 10px;border: 1px solid black;background-color: #FFF0B3; width: 25%; margin-right: 12%">
                    </div></div>
            </div>

        </div>

        <div class="row justify-content-center h-75 w-50 mt-2">

            <div class="col-12 col-lg-9 col-xl-8">
                <div class="card-body">
                    <div class="card-body p-4 hive_card">
                        <h1 class="label text-center" style="font-size: 3rem;">Test senza CNN</h1>
                    </div>
                </div>
            </div>

            <div class="col-12 col-lg-9 col-xl-8 mt-4">
                <div class="card-body">
                    <div class="card-body p-4 p-md-5 hive_card">


                        <form>
                            <div class="row">
                                <div class="col-md-12 mb-4">
                                    <div class="form-outline">
                                        <h5 class="form-label" for="HiveTempML">Temperatura percepita Arnia</h5>
                                        <input type="number" step="0.01" id="HiveTempML" class="form-control form-control-lg" style="border-radius: 10px;border: 1px solid black;background-color: #FFF0B3;">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 mb-4">
                                    <div class="form-outline">
                                        <h5 class="form-label" for="AmbTempML">Temperatura percepita Ambiente</h5>
                                        <input type="number" step="0.01" id="AmbTempML" class="form-control form-control-lg" style="border-radius: 10px;border: 1px solid black;background-color: #FFF0B3;">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 mb-4">
                                    <div class="form-outline">
                                        <h5 class="form-label" for="QueenPresenceML">Presenza Ape regina</h5>
                                        <input type="number" min="0" max="1" id="QueenPresenceML" class="form-control form-control-lg" style="border-radius: 10px;border: 1px solid black;background-color: #FFF0B3;">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 d-flex justify-content-center" style="gap:10px;">
                                    <input class="btn btn-lg" type="button" value="Invia" id="ML" style="border: 1px solid black;background-color: #FFF0B3">
                                </div>
                            </div>
                        </form>


                    </div>
                </div>
                <div>
                    <div style="height: 5%"></div>
                    <div style="height: 20%">
                    <div style="width: 50%; float:left">
                        <h5 class="form-label" style="text-align:center" width="50%">Previsione CCD</h5>
                    </div>
                    <div style="width: 50%; float: right">
                        <h5 class="form-label" style="text-align:center" width="50%">Euristica di Aristeo</h5>
                    </div>
                        <input disabled type="text" id="OutputPredictedCCDML" class="form-control form-control-lg" style=" float: left; border-radius: 10px;border: 1px solid black;background-color: #FFF0B3; width: 25%; margin-left: 12%; ">
                        <input disabled type="text" id="OutputHeuristicCCDML" class="form-control form-control-lg" style="float: right;  border-radius: 10px;border: 1px solid black;background-color: #FFF0B3; width: 25%; margin-right: 12%">
                    </div>
                </div>
            </div>

        </div>

    </div>
</section>

<script th:src="@{/Boostrap/js/bootstrap.bundle.js}"></script>
<script>

    $(document).ready(function () {

        $("#CNN").click(function () {
            let hiveTemp = $("#HiveTempCNN").val()
            let ambTemp = $("#AmbTempCNN").val()
            let data = {"hiveTemp": hiveTemp, "ambTemp": ambTemp}
            $.ajax({
                type: "GET",
                url: "predict_with_cnn",
                data: data,
                success: function (resp) {
                    let result = JSON.parse(resp)
                    if (result["predicted_queen"] === 1) {
                        $("#OutputPredictedQueenCNN").val("Presente").css("color", "green")
                    } else {
                        $("#OutputPredictedQueenCNN").val("Assente").css("color", "red")
                    }
                    if (result["actual_queen"] === 1) {
                        $("#OutputPresenceQueenCNN").val("Presente").css("color", "green")
                    } else {
                        $("#OutputPresenceQueenCNN").val("Assente").css("color", "red")
                    }
                    if (result["ccd_result"] === 1) {
                        $("#OutputPredictedCCDCNN").val("Rischio CCD").css("color", "red")
                    } else {
                        $("#OutputPredictedCCDCNN").val("No CCD").css("color", "green")
                    }
                    $("#OutputHeuristicCCDCNN").val((Math.round(result["ccd_true_probability"] * 100) / 100).toFixed(2))
                }
            })
        })

        $("#ML").click(function () {
            let hiveTemp = $("#HiveTempML").val()
            let ambTemp = $("#AmbTempML").val()
            let queenPresence = $("#QueenPresenceML").val()
            let data = {"hiveTemp": hiveTemp, "ambTemp": ambTemp, "queenPresence": queenPresence}
            console.log(data)
            $.ajax({
                type: "GET",
                url: "predict_without_cnn",
                data: data,
                success: function (resp) {
                    let result = JSON.parse(resp)
                    if (result["ccd_result"] === 1) {
                        $("#OutputPredictedCCDML").val("Rischio CCD").css("color", "red")
                    } else {
                        $("#OutputPredictedCCDML").val("No CCD").css("color", "green")
                    }
                    $("#OutputHeuristicCCDML").val((Math.round(result["ccd_true_probability"] * 100) / 100).toFixed(2))
                }
            })
        })
    })


</script>
</body>
</html>